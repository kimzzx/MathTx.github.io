<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathTx - ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏Ø ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á</title>
    <meta name="description" content="‡∏ï‡∏≥‡∏£‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏°.4-‡∏°.6 ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏£‡∏≤‡∏ü interactive ‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î">
    <meta property="og:title" content="MathTx - ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏Ø ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á">
    <meta property="og:description" content="‡∏ï‡∏≥‡∏£‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏°.4-‡∏°.6">
    <meta property="og:type" content="website">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0B57A4',
                        'primary-light': '#E6F4FF',
                        'primary-dark': '#083D73'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'serif': ['Noto Serif', 'serif']
                    }
                }
            }
        }
        
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Serif:wght@400;500;600&display=swap');
        
        .gradient-bg {
            background: linear-gradient(135deg, #0B57A4 0%, #E6F4FF 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0B57A4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .math-input {
            font-family: 'Courier New', monospace;
        }
        
        /* Slider Styles */
        .slider {
            -webkit-appearance: none;
            appearance: none;
            background: #ddd;
            outline: none;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        
        .slider:hover {
            opacity: 1;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #0B57A4;
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #0B57A4;
            cursor: pointer;
            border: none;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50" role="navigation" aria-label="‡∏´‡∏•‡∏±‡∏Å">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 40 40" fill="currentColor" aria-hidden="true">
                            <rect x="2" y="2" width="36" height="36" rx="8" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="M12 20h16M20 12v16" stroke="currentColor" stroke-width="2"/>
                            <circle cx="15" cy="15" r="2" fill="currentColor"/>
                            <circle cx="25" cy="25" r="2" fill="currentColor"/>
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h1 class="text-xl font-bold text-primary">MathTx</h1>
                    </div>
                </div>
                
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <button onclick="showSection('home')" class="nav-link text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors" aria-label="‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
                        <button onclick="showSection('lessons')" class="nav-link text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors" aria-label="‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                        <button onclick="showSection('graph-lab')" class="nav-link text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors" aria-label="Graph Lab">Graph Lab</button>
                        <button onclick="showSection('quiz')" class="nav-link text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors" aria-label="‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</button>
                        <button id="profile-nav" onclick="showSection('profile')" class="nav-link text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors hidden" aria-label="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
                        <button onclick="showSection('about')" class="nav-link text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors" aria-label="‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</button>
                    </div>
                </div>
                
                <div class="flex items-center gap-4">
                    <div id="user-menu" class="hidden">
                        <div class="flex items-center gap-2">
                            <span id="user-name" class="text-sm text-gray-700"></span>
                            <button onclick="logout()" class="text-sm text-gray-500 hover:text-primary">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                        </div>
                    </div>
                    <div id="auth-buttons" class="flex items-center gap-2">
                        <button onclick="showSection('login')" class="text-sm text-gray-700 hover:text-primary px-3 py-1 rounded">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                        <button onclick="showSection('register')" class="text-sm bg-primary text-white px-3 py-1 rounded hover:bg-primary-dark">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                    </div>
                    <div class="md:hidden">
                        <button id="mobile-menu-btn" class="text-gray-700 hover:text-primary p-2" aria-label="‡πÄ‡∏°‡∏ô‡∏π" aria-expanded="false">
                            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile menu -->
        <div id="mobile-menu" class="md:hidden hidden bg-white border-t">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <button onclick="showSection('home')" class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md text-base font-medium w-full text-left">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
                <button onclick="showSection('lessons')" class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md text-base font-medium w-full text-left">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                <button onclick="showSection('graph-lab')" class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md text-base font-medium w-full text-left">Graph Lab</button>
                <button onclick="showSection('quiz')" class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md text-base font-medium w-full text-left">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</button>
                <button id="mobile-profile-nav" onclick="showSection('profile')" class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md text-base font-medium w-full text-left hidden">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
                <button onclick="showSection('about')" class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md text-base font-medium w-full text-left">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</button>
                <div id="mobile-auth-buttons" class="border-t pt-2 mt-2">
                    <button onclick="showSection('login')" class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md text-base font-medium w-full text-left">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                    <button onclick="showSection('register')" class="block bg-primary text-white px-3 py-2 rounded-md text-base font-medium w-full text-left">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                </div>
                <div id="mobile-user-menu" class="border-t pt-2 mt-2 hidden">
                    <div class="px-3 py-2 text-sm text-gray-700" id="mobile-user-name"></div>
                    <button onclick="logout()" class="block text-gray-500 hover:text-primary px-3 py-2 rounded-md text-base font-medium w-full text-left">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- Home Section -->
        <section id="home" class="section active">
            <!-- Hero Section -->
            <div class="gradient-bg text-white py-20">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h1 class="text-4xl md:text-6xl font-bold mb-6">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏Ø ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á</h1>
                    <p class="text-xl md:text-2xl mb-8 opacity-90">‡∏ï‡∏≥‡∏£‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏°.4‚Äì‡∏°.6 ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏£‡∏≤‡∏ü interactive</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="showSection('lessons')" class="bg-white text-primary px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                        <button onclick="showSection('graph-lab')" class="border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-primary transition-colors">‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏Å‡∏£‡∏≤‡∏ü</button>
                    </div>
                </div>
            </div>
            
            <!-- Quick Search -->
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 relative z-10">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-2xl font-semibold mb-4 text-center">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏î‡πà‡∏ß‡∏ô</h2>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="text" id="quick-search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏≤‡∏£‡∏≤‡πÇ‡∏ö‡∏•‡∏≤, ‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì..." class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-label="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
                        <button onclick="performQuickSearch()" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark transition-colors">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
                    </div>
                </div>
            </div>
            
            <!-- Features -->
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
                <h2 class="text-3xl font-bold text-center mb-12">‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏î‡πà‡∏ô</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-lg card-hover text-center">
                        <div class="text-4xl mb-4">üìö</div>
                        <h3 class="text-xl font-semibold mb-3">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô</h3>
                        <p class="text-gray-600">‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ó‡∏∏‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ ‡∏°.4-‡∏°.6 ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg card-hover text-center">
                        <div class="text-4xl mb-4">üìä</div>
                        <h3 class="text-xl font-semibold mb-3">‡∏Å‡∏£‡∏≤‡∏ü Interactive</h3>
                        <p class="text-gray-600">‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏ã‡∏π‡∏°‡πÑ‡∏î‡πâ ‡∏•‡∏≤‡∏Å‡πÑ‡∏î‡πâ ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg card-hover text-center">
                        <div class="text-4xl mb-4">‚úèÔ∏è</div>
                        <h3 class="text-xl font-semibold mb-3">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</h3>
                        <p class="text-gray-600">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏â‡∏•‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lessons Section -->
        <section id="lessons" class="section hidden">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <h1 class="text-3xl font-bold mb-8">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h1>
                
                <!-- Filter -->
                <div class="mb-8">
                    <div class="flex flex-wrap gap-4">
                        <button onclick="filterLessons('all')" class="filter-btn active bg-primary text-white px-4 py-2 rounded-lg">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                        <button onclick="filterLessons('algebra')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300">‡∏û‡∏µ‡∏ä‡∏Ñ‡∏ì‡∏¥‡∏ï</button>
                        <button onclick="filterLessons('trigonometry')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300">‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥</button>
                        <button onclick="filterLessons('geometry')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300">‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï</button>
                        <button onclick="filterLessons('calculus')" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300">‡πÅ‡∏Ñ‡∏•‡∏Ñ‡∏π‡∏•‡∏±‡∏™</button>
                    </div>
                </div>
                
                <!-- Lessons Grid -->
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="lessons-grid">
                    <!-- Algebra Lessons -->
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="algebra">
                        <div class="text-2xl mb-3">üî¢</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏á</h3>
                        <p class="text-gray-600 mb-4">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡πÇ‡∏ö‡∏•‡∏≤ ‡∏à‡∏∏‡∏î‡∏¢‡∏≠‡∏î ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö</p>
                        <button onclick="showLessonDetail('quadratic')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="algebra">
                        <div class="text-2xl mb-3">üìà</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô</h3>
                        <p class="text-gray-600 mb-4">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô ‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡πÅ‡∏Å‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á</p>
                        <button onclick="showLessonDetail('linear')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <!-- Trigonometry Lessons -->
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="trigonometry">
                        <div class="text-2xl mb-3">üìê</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥</h3>
                        <p class="text-gray-600 mb-4">sin, cos, tan ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ</p>
                        <button onclick="showLessonDetail('trig-ratios')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="trigonometry">
                        <div class="text-2xl mb-3">üåä</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥</h3>
                        <p class="text-gray-600 mb-4">‡∏Å‡∏£‡∏≤‡∏ü sin, cos ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏π‡∏õ</p>
                        <button onclick="showLessonDetail('trig-functions')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="algebra">
                        <div class="text-2xl mb-3">üîÑ</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á</h3>
                        <p class="text-gray-600 mb-4">e^x, ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÅ‡∏ö‡∏ö‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á ‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏¥‡∏ó‡∏∂‡∏°</p>
                        <button onclick="showLessonDetail('exponential')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="algebra">
                        <div class="text-2xl mb-3">üìä</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô</h3>
                        <p class="text-gray-600 mb-4">‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏Å‡∏≤‡∏£ 2 ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå</p>
                        <button onclick="showLessonDetail('linear-system')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <!-- Geometry Lessons -->
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="geometry">
                        <div class="text-2xl mb-3">‚≠ï</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏ß‡∏á‡∏Å‡∏•‡∏°</h3>
                        <p class="text-gray-600 mb-4">‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏ß‡∏á‡∏Å‡∏•‡∏° ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™ ‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</p>
                        <button onclick="showLessonDetail('circle')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="geometry">
                        <div class="text-2xl mb-3">üìê</div>
                        <h3 class="text-xl font-semibold mb-2">‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå</h3>
                        <p class="text-gray-600 mb-4">‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡∏ú‡∏•‡∏Ñ‡∏π‡∏ì‡∏à‡∏∏‡∏î ‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏Ñ‡∏π‡∏ì‡πÑ‡∏Ç‡∏ß‡πâ</p>
                        <button onclick="showLessonDetail('vectors')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="geometry">
                        <div class="text-2xl mb-3">üî∫</div>
                        <h3 class="text-xl font-semibold mb-2">‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h3>
                        <p class="text-gray-600 mb-4">‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ‡∏à‡∏∏‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á</p>
                        <button onclick="showLessonDetail('analytic-geometry')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <!-- Calculus Lessons -->
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="calculus">
                        <div class="text-2xl mb-3">‚à´</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</h3>
                        <p class="text-gray-600 mb-4">‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏•‡∏¥‡∏°‡∏¥‡∏ï</p>
                        <button onclick="showLessonDetail('limits')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="calculus">
                        <div class="text-2xl mb-3">üìà</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå</h3>
                        <p class="text-gray-600 mb-4">‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå</p>
                        <button onclick="showLessonDetail('derivatives')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                    
                    <div class="lesson-card bg-white rounded-lg shadow-lg p-6 card-hover" data-category="calculus">
                        <div class="text-2xl mb-3">‚à´</div>
                        <h3 class="text-xl font-semibold mb-2">‡∏õ‡∏£‡∏¥‡∏û‡∏±‡∏ô‡∏ò‡πå</h3>
                        <p class="text-gray-600 mb-4">‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏õ‡∏£‡∏¥‡∏û‡∏±‡∏ô‡∏ò‡πå ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ï‡πâ‡∏Å‡∏£‡∏≤‡∏ü ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå</p>
                        <button onclick="showLessonDetail('integrals')" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lesson Detail Section -->
        <section id="lesson-detail" class="section hidden">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <button onclick="showSection('lessons')" class="mb-6 text-primary hover:text-primary-dark flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                </button>
                
                <div id="lesson-content" class="bg-white rounded-lg shadow-lg p-8 font-serif">
                    <!-- Content will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Graph Lab Section -->
        <section id="graph-lab" class="section hidden">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <h1 class="text-3xl font-bold mb-8">Graph Lab - ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≤‡∏ü</h1>
                
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- Input Panel -->
                    <div class="lg:col-span-1">
                        <div class="bg-white rounded-lg shadow-lg p-6">
                            <h2 class="text-xl font-semibold mb-4">‡∏õ‡πâ‡∏≠‡∏ô‡∏™‡∏°‡∏Å‡∏≤‡∏£</h2>
                            
                            <div class="mb-4">
                                <label for="equation-input" class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏°‡∏Å‡∏≤‡∏£ (y = ...)</label>
                                <input type="text" id="equation-input" class="math-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="x^2 - 4*x + 3" aria-describedby="equation-help">
                                <p id="equation-help" class="text-sm text-gray-500 mt-1">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: x^2, sin(x), 2*x + 1</p>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label for="x-min" class="block text-sm font-medium text-gray-700 mb-1">x ‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î</label>
                                    <input type="number" id="x-min" value="-10" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary" onchange="updateGraphRange()">
                                </div>
                                <div>
                                    <label for="x-max" class="block text-sm font-medium text-gray-700 mb-1">x ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</label>
                                    <input type="number" id="x-max" value="10" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary" onchange="updateGraphRange()">
                                </div>
                            </div>
                            
                            <button onclick="plotGraph()" class="w-full bg-primary text-white py-3 rounded-lg hover:bg-primary-dark transition-colors mb-4">
                                <span id="plot-btn-text">‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü</span>
                                <span id="plot-loading" class="loading hidden ml-2"></span>
                            </button>
                            
                            <!-- Interactive Controls -->
                            <div id="graph-controls" class="border-t pt-4 mb-4 hidden">
                                <h3 class="font-semibold mb-3">‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏£‡∏≤‡∏ü</h3>
                                
                                <!-- Zoom Controls -->
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ã‡∏π‡∏°: <span id="zoom-value">1.0x</span></label>
                                    <input type="range" id="zoom-slider" min="0.1" max="5" step="0.1" value="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                </div>
                                
                                <!-- Pan Controls -->
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô: <span id="pan-x-value">0</span></label>
                                    <input type="range" id="pan-x-slider" min="-20" max="20" step="0.5" value="0" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                </div>
                                
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á: <span id="pan-y-value">0</span></label>
                                    <input type="range" id="pan-y-slider" min="-20" max="20" step="0.5" value="0" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                </div>
                                
                                <!-- Function Parameters (for parametric functions) -->
                                <div id="param-controls" class="hidden">
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå A: <span id="param-a-value">1</span></label>
                                        <input type="range" id="param-a-slider" min="-5" max="5" step="0.1" value="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå B: <span id="param-b-value">1</span></label>
                                        <input type="range" id="param-b-slider" min="-5" max="5" step="0.1" value="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                                    </div>
                                </div>
                                
                                <button onclick="resetControls()" class="w-full bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors text-sm">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</button>
                            </div>
                            
                            <div class="border-t pt-4">
                                <h3 class="font-semibold mb-2">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏Å‡∏≤‡∏£</h3>
                                <div class="space-y-2">
                                    <button onclick="setEquation('x^2 - 4*x + 3')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">x¬≤ - 4x + 3 (‡∏û‡∏≤‡∏£‡∏≤‡πÇ‡∏ö‡∏•‡∏≤)</button>
                                    <button onclick="setEquation('sin(x)')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">sin(x) (‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏ã‡∏ô‡πå)</button>
                                    <button onclick="setEquation('cos(x)')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">cos(x) (‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÇ‡∏Ñ‡πÑ‡∏ã‡∏ô‡πå)</button>
                                    <button onclick="setEquation('2*x + 1')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">2x + 1 (‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á)</button>
                                    <button onclick="setEquation('x^3 - 3*x')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">x¬≥ - 3x (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≤‡∏°)</button>
                                    <button onclick="setEquation('Math.exp(x)')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">e^x (‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á)</button>
                                    <button onclick="setEquation('Math.log(x)')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">ln(x) (‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏¥‡∏ó‡∏∂‡∏°)</button>
                                    <button onclick="setEquation('Math.abs(x)')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">|x| (‡∏Ñ‡πà‡∏≤‡∏™‡∏±‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå)</button>
                                    <button onclick="setEquation('Math.sqrt(x)')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">‚àöx (‡∏£‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á)</button>
                                    <button onclick="setEquation('1/x')" class="block w-full text-left text-sm text-primary hover:bg-primary-light px-2 py-1 rounded">1/x (‡πÑ‡∏Æ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÇ‡∏ö‡∏•‡∏≤)</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Graph Panel -->
                    <div class="lg:col-span-2">
                        <div class="bg-white rounded-lg shadow-lg p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold">‡∏Å‡∏£‡∏≤‡∏ü</h2>
                                <div class="flex gap-2">
                                    <button onclick="resetZoom()" class="text-sm bg-gray-200 text-gray-700 px-3 py-1 rounded hover:bg-gray-300">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ã‡∏π‡∏°</button>
                                    <button onclick="downloadGraph()" class="text-sm bg-primary text-white px-3 py-1 rounded hover:bg-primary-dark">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PNG</button>
                                </div>
                            </div>
                            
                            <div id="graph-container" class="w-full h-96 border border-gray-200 rounded-lg flex items-center justify-center text-gray-500" style="min-height: 400px;">
                                <div class="text-center">
                                    <div class="text-4xl mb-2">üìä</div>
                                    <p>‡∏õ‡πâ‡∏≠‡∏ô‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü</p>
                                </div>
                            </div>
                            
                            <div id="graph-info" class="mt-4 p-4 bg-gray-50 rounded-lg hidden">
                                <h3 class="font-semibold mb-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏£‡∏≤‡∏ü</h3>
                                <div id="graph-details"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section id="quiz" class="section hidden">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <h1 class="text-3xl font-bold mb-8">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</h1>
                
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <div id="quiz-selection" class="quiz-state">
                        <h2 class="text-2xl font-semibold mb-6">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</h2>
                        <div class="grid md:grid-cols-2 gap-4">
                            <button onclick="startQuiz('quadratic')" class="p-6 border-2 border-gray-200 rounded-lg hover:border-primary hover:bg-primary-light transition-colors text-left">
                                <h3 class="font-semibold text-lg mb-2">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏á</h3>
                                <p class="text-gray-600">10 ‡∏Ç‡πâ‡∏≠ | 15 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
                            </button>
                            <button onclick="startQuiz('linear')" class="p-6 border-2 border-gray-200 rounded-lg hover:border-primary hover:bg-primary-light transition-colors text-left">
                                <h3 class="font-semibold text-lg mb-2">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô</h3>
                                <p class="text-gray-600">8 ‡∏Ç‡πâ‡∏≠ | 12 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
                            </button>
                            <button onclick="startQuiz('trigonometry')" class="p-6 border-2 border-gray-200 rounded-lg hover:border-primary hover:bg-primary-light transition-colors text-left">
                                <h3 class="font-semibold text-lg mb-2">‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥</h3>
                                <p class="text-gray-600">12 ‡∏Ç‡πâ‡∏≠ | 20 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
                            </button>
                            <button onclick="startQuiz('mixed')" class="p-6 border-2 border-gray-200 rounded-lg hover:border-primary hover:bg-primary-light transition-colors text-left">
                                <h3 class="font-semibold text-lg mb-2">‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</h3>
                                <p class="text-gray-600">15 ‡∏Ç‡πâ‡∏≠ | 25 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
                            </button>
                        </div>
                    </div>
                    
                    <div id="quiz-active" class="quiz-state hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h2 id="quiz-title" class="text-2xl font-semibold"></h2>
                            <div class="flex items-center gap-4">
                                <span id="quiz-progress" class="text-sm text-gray-600"></span>
                                <div id="quiz-timer" class="text-lg font-mono bg-gray-100 px-3 py-1 rounded"></div>
                            </div>
                        </div>
                        
                        <div id="question-container" class="mb-6">
                            <!-- Questions will be loaded here -->
                        </div>
                        
                        <div class="flex justify-between">
                            <button id="prev-btn" onclick="previousQuestion()" class="bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 disabled:opacity-50" disabled>‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
                            <button id="next-btn" onclick="nextQuestion()" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-dark">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
                        </div>
                    </div>
                    
                    <div id="quiz-results" class="quiz-state hidden">
                        <div class="text-center">
                            <div class="text-6xl mb-4">üéâ</div>
                            <h2 class="text-2xl font-semibold mb-4">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!</h2>
                            <div id="score-display" class="text-4xl font-bold text-primary mb-4"></div>
                            <div id="score-details" class="text-gray-600 mb-6"></div>
                            <button onclick="resetQuiz()" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Login Section -->
        <section id="login" class="section hidden">
            <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <h1 class="text-2xl font-bold text-center mb-6">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h1>
                    
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label for="login-email" class="block text-sm font-medium text-gray-700 mb-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                            <input type="email" id="login-email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-required="true">
                        </div>
                        <div>
                            <label for="login-password" class="block text-sm font-medium text-gray-700 mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô *</label>
                            <input type="password" id="login-password" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-required="true">
                        </div>
                        <div class="flex items-center justify-between">
                            <label class="flex items-center">
                                <input type="checkbox" id="remember-me" class="mr-2">
                                <span class="text-sm text-gray-600">‡∏à‡∏î‡∏à‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
                            </label>
                            <button type="button" class="text-sm text-primary hover:text-primary-dark">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?</button>
                        </div>
                        <button type="submit" class="w-full bg-primary text-white py-3 rounded-lg hover:bg-primary-dark transition-colors">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                    </form>
                    
                    <div class="mt-6 text-center">
                        <p class="text-gray-600">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <button onclick="showSection('register')" class="text-primary hover:text-primary-dark">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button></p>
                    </div>
                    
                    <div id="login-error" class="hidden mt-4 p-4 bg-red-100 text-red-700 rounded-lg text-sm"></div>
                </div>
            </div>
        </section>

        <!-- Register Section -->
        <section id="register" class="section hidden">
            <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <h1 class="text-2xl font-bold text-center mb-6">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h1>
                    
                    <form id="register-form" class="space-y-4">
                        <div>
                            <label for="register-name" class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
                            <input type="text" id="register-name" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-required="true">
                        </div>
                        <div>
                            <label for="register-email" class="block text-sm font-medium text-gray-700 mb-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                            <input type="email" id="register-email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-required="true">
                        </div>
                        <div>
                            <label for="register-password" class="block text-sm font-medium text-gray-700 mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô *</label>
                            <input type="password" id="register-password" required minlength="6" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-required="true">
                            <p class="text-xs text-gray-500 mt-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</p>
                        </div>
                        <div>
                            <label for="register-confirm-password" class="block text-sm font-medium text-gray-700 mb-1">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô *</label>
                            <input type="password" id="register-confirm-password" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-required="true">
                        </div>
                        <div>
                            <label for="register-grade" class="block text-sm font-medium text-gray-700 mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</label>
                            <select id="register-grade" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</option>
                                <option value="m4">‡∏°.4</option>
                                <option value="m5">‡∏°.5</option>
                                <option value="m6">‡∏°.6</option>
                                <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                            </select>
                        </div>
                        <div class="flex items-start">
                            <input type="checkbox" id="accept-terms" required class="mt-1 mr-2" aria-required="true">
                            <label for="accept-terms" class="text-sm text-gray-600">
                                ‡∏â‡∏±‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö <button type="button" class="text-primary hover:text-primary-dark">‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button> ‡πÅ‡∏•‡∏∞ <button type="button" class="text-primary hover:text-primary-dark">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</button>
                            </label>
                        </div>
                        <button type="submit" class="w-full bg-primary text-white py-3 rounded-lg hover:bg-primary-dark transition-colors">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                    </form>
                    
                    <div class="mt-6 text-center">
                        <p class="text-gray-600">‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß? <button onclick="showSection('login')" class="text-primary hover:text-primary-dark">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button></p>
                    </div>
                    
                    <div id="register-error" class="hidden mt-4 p-4 bg-red-100 text-red-700 rounded-lg text-sm"></div>
                    <div id="register-success" class="hidden mt-4 p-4 bg-green-100 text-green-700 rounded-lg text-sm"></div>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="section hidden">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <h1 class="text-3xl font-bold mb-8">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h1>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Profile Info -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h2 class="text-xl font-semibold mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h2>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                                <p id="profile-name" class="text-gray-900"></p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                                <p id="profile-email" class="text-gray-900"></p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</label>
                                <p id="profile-grade" class="text-gray-900"></p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠</label>
                                <p id="profile-joined" class="text-gray-900"></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Progress Stats -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h2 class="text-xl font-semibold mb-4">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</h2>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß</span>
                                <span id="lessons-completed" class="font-semibold text-primary">0/6</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="lessons-progress" class="bg-primary h-2 rounded-full" style="width: 0%"></div>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß</span>
                                <span id="quizzes-completed" class="font-semibold text-green-600">0</span>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</span>
                                <span id="average-score" class="font-semibold text-blue-600">-</span>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">‡∏Å‡∏£‡∏≤‡∏ü‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏î‡πÅ‡∏•‡πâ‡∏ß</span>
                                <span id="graphs-created" class="font-semibold text-purple-600">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Activity -->
                <div class="bg-white rounded-lg shadow-lg p-6 mt-8">
                    <h2 class="text-xl font-semibold mb-4">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
                    <div id="recent-activity" class="space-y-3">
                        <p class="text-gray-500 text-center py-8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section hidden">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <h1 class="text-3xl font-bold mb-8">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</h1>
                
                <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h2>
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        TextBookMath ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏™‡∏ô‡∏∏‡∏Å‡∏™‡∏ô‡∏≤‡∏ô 
                        ‡πÄ‡∏£‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏≤‡∏Å ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
                    </p>
                    <p class="text-gray-700 leading-relaxed">
                        ‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏£‡∏≤‡∏ü interactive ‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ ‡πÄ‡∏£‡∏≤‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå
                        ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ
                    </p>
                </div>
                
                <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">‡∏ó‡∏µ‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="text-center">
                            <div class="w-20 h-20 bg-primary-light rounded-full flex items-center justify-center mx-auto mb-3">
                                <span class="text-2xl">üë®‚Äçüè´</span>
                            </div>
                            <h3 class="font-semibold">‡∏ó‡∏µ‡∏°‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç</h3>
                            <p class="text-gray-600 text-sm">‡∏Ñ‡∏£‡∏π‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏π‡∏á</p>
                        </div>
                        <div class="text-center">
                            <div class="w-20 h-20 bg-primary-light rounded-full flex items-center justify-center mx-auto mb-3">
                                <span class="text-2xl">üë©‚Äçüíª</span>
                            </div>
                            <h3 class="font-semibold">‡∏ó‡∏µ‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</h3>
                            <p class="text-gray-600 text-sm">‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏•‡∏∞ UX Designer</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <h2 class="text-2xl font-semibold mb-4">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</h2>
                    <form id="contact-form" class="space-y-4">
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label for="contact-name" class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠ *</label>
                                <input type="text" id="contact-name" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-required="true">
                            </div>
                            <div>
                                <label for="contact-email" class="block text-sm font-medium text-gray-700 mb-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                                <input type="email" id="contact-email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-required="true">
                            </div>
                        </div>
                        <div>
                            <label for="contact-message" class="block text-sm font-medium text-gray-700 mb-1">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° *</label>
                            <textarea id="contact-message" rows="4" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent" aria-required="true"></textarea>
                        </div>
                        <button type="submit" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark transition-colors">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
                    </form>
                    
                    <div id="contact-success" class="hidden mt-4 p-4 bg-green-100 text-green-700 rounded-lg">
                        ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤! ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">MathTx</h3>
                    <p class="text-gray-300">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏Ø ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li><a href="#" class="hover:text-white">‡∏û‡∏µ‡∏ä‡∏Ñ‡∏ì‡∏¥‡∏ï</a></li>
                        <li><a href="#" class="hover:text-white">‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥</a></li>
                        <li><a href="#" class="hover:text-white">‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï</a></li>
                        <li><a href="#" class="hover:text-white">‡πÅ‡∏Ñ‡∏•‡∏Ñ‡∏π‡∏•‡∏±‡∏™</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li><a href="#" class="hover:text-white">Graph Lab</a></li>
                        <li><a href="#" class="hover:text-white">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</a></li>
                        <li><a href="#" class="hover:text-white">‡πÄ‡∏â‡∏•‡∏¢‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li><a href="#" class="hover:text-white">FAQ</a></li>
                        <li><a href="#" class="hover:text-white">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a></li>
                        <li><a href="#" class="hover:text-white">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-300">
                <p>&copy; 2024 MathTx. ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global variables
        let currentSection = 'home';
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let quizTimer = null;
        let userAnswers = [];
        let currentUser = null;
        let userProgress = {
            lessonsCompleted: [],
            quizzesCompleted: [],
            graphsCreated: 0,
            totalScore: 0,
            quizCount: 0
        };
        
        // Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
                section.classList.remove('active');
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
                targetSection.classList.add('active');
                currentSection = sectionId;
                
                // Update progress display if showing profile
                if (sectionId === 'profile' && currentUser) {
                    updateProgressDisplay();
                    updateRecentActivity();
                }
            }
            
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-primary', 'font-semibold');
                link.classList.add('text-gray-700');
            });
            
            // Close mobile menu
            document.getElementById('mobile-menu').classList.add('hidden');
            document.getElementById('mobile-menu-btn').setAttribute('aria-expanded', 'false');
        }
        
        function updateRecentActivity() {
            const activityContainer = document.getElementById('recent-activity');
            if (currentUser && currentUser.recentActivity && currentUser.recentActivity.length > 0) {
                activityContainer.innerHTML = currentUser.recentActivity.map(activity => `
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="text-gray-700">${activity.text}</span>
                        <span class="text-sm text-gray-500">${new Date(activity.date).toLocaleDateString('th-TH')}</span>
                    </div>
                `).join('');
            } else {
                activityContainer.innerHTML = '<p class="text-gray-500 text-center py-8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</p>';
            }
        }
        
        // Mobile menu toggle
        document.getElementById('mobile-menu-btn').addEventListener('click', function() {
            const menu = document.getElementById('mobile-menu');
            const isHidden = menu.classList.contains('hidden');
            
            if (isHidden) {
                menu.classList.remove('hidden');
                this.setAttribute('aria-expanded', 'true');
            } else {
                menu.classList.add('hidden');
                this.setAttribute('aria-expanded', 'false');
            }
        });
        
        // Quick search
        function performQuickSearch() {
            const query = document.getElementById('quick-search').value.toLowerCase();
            if (!query) return;
            
            showSection('lessons');
            
            // Filter lessons based on search
            const lessons = document.querySelectorAll('.lesson-card');
            lessons.forEach(lesson => {
                const title = lesson.querySelector('h3').textContent.toLowerCase();
                const description = lesson.querySelector('p').textContent.toLowerCase();
                
                if (title.includes(query) || description.includes(query)) {
                    lesson.style.display = 'block';
                } else {
                    lesson.style.display = 'none';
                }
            });
        }
        
        // Enter key for search
        document.getElementById('quick-search').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performQuickSearch();
            }
        });
        
        // Enter key for graph plotting
        document.addEventListener('DOMContentLoaded', function() {
            const equationInput = document.getElementById('equation-input');
            if (equationInput) {
                equationInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        plotGraph();
                    }
                });
            }
        });
        
        // Lesson filtering
        function filterLessons(category) {
            const lessons = document.querySelectorAll('.lesson-card');
            const buttons = document.querySelectorAll('.filter-btn');
            
            // Update button states
            buttons.forEach(btn => {
                btn.classList.remove('bg-primary', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-primary', 'text-white');
            
            // Filter lessons
            lessons.forEach(lesson => {
                if (category === 'all' || lesson.dataset.category === category) {
                    lesson.style.display = 'block';
                } else {
                    lesson.style.display = 'none';
                }
            });
        }
        
        // Lesson details
        function showLessonDetail(lessonId) {
            const lessons = {
                'quadratic': {
                    title: '‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏á',
                    content: `
                        <h1 class="text-3xl font-bold mb-6">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏á</h1>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏ô‡∏¥‡∏¢‡∏≤‡∏°</h2>
                        <p class="mb-4">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏á ‡∏Ñ‡∏∑‡∏≠ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö $f(x) = ax^2 + bx + c$ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ $a \\neq 0$</p>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</h2>
                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <p><strong>‡∏à‡∏∏‡∏î‡∏¢‡∏≠‡∏î:</strong> $x = -\\frac{b}{2a}$</p>
                            <p><strong>‡πÅ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö:</strong> $x = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$</p>
                            <p><strong>‡∏î‡∏¥‡∏™‡∏Ñ‡∏£‡∏¥‡∏°‡∏¥‡πÅ‡∏ô‡∏ô‡∏ï‡πå:</strong> $\\Delta = b^2 - 4ac$</p>
                        </div>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</h2>
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <p><strong>‡πÇ‡∏à‡∏ó‡∏¢‡πå:</strong> ‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏¢‡∏≠‡∏î‡∏Ç‡∏≠‡∏á $f(x) = x^2 - 4x + 3$</p>
                            <p><strong>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥:</strong></p>
                            <p>$a = 1, b = -4, c = 3$</p>
                            <p>$x = -\\frac{(-4)}{2(1)} = \\frac{4}{2} = 2$</p>
                            <p>$f(2) = 2^2 - 4(2) + 3 = 4 - 8 + 3 = -1$</p>
                            <p><strong>‡∏ï‡∏≠‡∏ö:</strong> ‡∏à‡∏∏‡∏î‡∏¢‡∏≠‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà $(2, -1)$</p>
                        </div>
                        
                        <div class="mt-8">
                            <button onclick="showSection('graph-lab'); setEquation('x^2 - 4*x + 3')" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark mr-4">‡∏î‡∏π‡∏Å‡∏£‡∏≤‡∏ü‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
                            <button onclick="startQuiz('quadratic'); trackLessonCompletion('quadratic')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</button>
                        </div>
                    `
                },
                'linear': {
                    title: '‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô',
                    content: `
                        <h1 class="text-3xl font-bold mb-6">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô</h1>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏ô‡∏¥‡∏¢‡∏≤‡∏°</h2>
                        <p class="mb-4">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô ‡∏Ñ‡∏∑‡∏≠ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö $f(x) = mx + b$ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ $m$ ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô ‡πÅ‡∏•‡∏∞ $b$ ‡∏Ñ‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡πÅ‡∏Å‡∏ô y</p>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</h2>
                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <p><strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô:</strong> $m = \\frac{y_2 - y_1}{x_2 - x_1}$</p>
                            <p><strong>‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á:</strong> $y - y_1 = m(x - x_1)$</p>
                            <p><strong>‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡πÅ‡∏Å‡∏ô x:</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠ $y = 0$</p>
                            <p><strong>‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡πÅ‡∏Å‡∏ô y:</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠ $x = 0$</p>
                        </div>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</h2>
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <p><strong>‡πÇ‡∏à‡∏ó‡∏¢‡πå:</strong> ‡∏´‡∏≤‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏∏‡∏î $(1, 3)$ ‡πÅ‡∏•‡∏∞ $(3, 7)$</p>
                            <p><strong>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥:</strong></p>
                            <p>$m = \\frac{7-3}{3-1} = \\frac{4}{2} = 2$</p>
                            <p>$y - 3 = 2(x - 1)$</p>
                            <p>$y - 3 = 2x - 2$</p>
                            <p>$y = 2x + 1$</p>
                            <p><strong>‡∏ï‡∏≠‡∏ö:</strong> $y = 2x + 1$</p>
                        </div>
                        
                        <div class="mt-8">
                            <button onclick="showSection('graph-lab'); setEquation('2*x + 1')" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark mr-4">‡∏î‡∏π‡∏Å‡∏£‡∏≤‡∏ü‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
                            <button onclick="startQuiz('linear'); trackLessonCompletion('linear')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</button>
                        </div>
                    `
                },
                'trig-ratios': {
                    title: '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥',
                    content: `
                        <h1 class="text-3xl font-bold mb-6">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥</h1>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏ô‡∏¥‡∏¢‡∏≤‡∏°</h2>
                        <p class="mb-4">‡πÉ‡∏ô‡∏™‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏∏‡∏°‡∏â‡∏≤‡∏Å ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥ ‡∏Ñ‡∏∑‡∏≠ ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°</p>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏™‡∏π‡∏ï‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h2>
                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <p><strong>‡πÑ‡∏ã‡∏ô‡πå:</strong> $\\sin \\theta = \\frac{\\text{‡∏î‡πâ‡∏≤‡∏ô‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°}}{\\text{‡∏î‡πâ‡∏≤‡∏ô‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏°‡∏∏‡∏°‡∏â‡∏≤‡∏Å}}$</p>
                            <p><strong>‡πÇ‡∏Ñ‡πÑ‡∏ã‡∏ô‡πå:</strong> $\\cos \\theta = \\frac{\\text{‡∏î‡πâ‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏¥‡∏î}}{\\text{‡∏î‡πâ‡∏≤‡∏ô‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏°‡∏∏‡∏°‡∏â‡∏≤‡∏Å}}$</p>
                            <p><strong>‡πÅ‡∏ó‡∏ô‡πÄ‡∏à‡∏ô‡∏ï‡πå:</strong> $\\tan \\theta = \\frac{\\text{‡∏î‡πâ‡∏≤‡∏ô‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°}}{\\text{‡∏î‡πâ‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏¥‡∏î}} = \\frac{\\sin \\theta}{\\cos \\theta}$</p>
                        </div>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏°‡∏∏‡∏°‡∏û‡∏¥‡πÄ‡∏®‡∏©</h2>
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <table class="w-full border-collapse border border-gray-300">
                                <tr class="bg-gray-200">
                                    <th class="border border-gray-300 p-2">‡∏°‡∏∏‡∏°</th>
                                    <th class="border border-gray-300 p-2">sin</th>
                                    <th class="border border-gray-300 p-2">cos</th>
                                    <th class="border border-gray-300 p-2">tan</th>
                                </tr>
                                <tr>
                                    <td class="border border-gray-300 p-2">30¬∞</td>
                                    <td class="border border-gray-300 p-2">1/2</td>
                                    <td class="border border-gray-300 p-2">‚àö3/2</td>
                                    <td class="border border-gray-300 p-2">1/‚àö3</td>
                                </tr>
                                <tr>
                                    <td class="border border-gray-300 p-2">45¬∞</td>
                                    <td class="border border-gray-300 p-2">‚àö2/2</td>
                                    <td class="border border-gray-300 p-2">‚àö2/2</td>
                                    <td class="border border-gray-300 p-2">1</td>
                                </tr>
                                <tr>
                                    <td class="border border-gray-300 p-2">60¬∞</td>
                                    <td class="border border-gray-300 p-2">‚àö3/2</td>
                                    <td class="border border-gray-300 p-2">1/2</td>
                                    <td class="border border-gray-300 p-2">‚àö3</td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="mt-8">
                            <button onclick="showSection('graph-lab'); setEquation('sin(x)')" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark mr-4">‡∏î‡∏π‡∏Å‡∏£‡∏≤‡∏ü sin(x)</button>
                            <button onclick="startQuiz('trigonometry'); trackLessonCompletion('trig-ratios')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</button>
                        </div>
                    `
                },
                'trig-functions': {
                    title: '‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥',
                    content: `
                        <h1 class="text-3xl font-bold mb-6">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥</h1>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏Å‡∏£‡∏≤‡∏ü‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥</h2>
                        <p class="mb-4">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô sin, cos, ‡πÅ‡∏•‡∏∞ tan ‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≤‡∏ö (periodic) ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏•‡∏∑‡πà‡∏ô</p>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</h2>
                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <p><strong>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô sin:</strong></p>
                            <p>‚Ä¢ ‡πÇ‡∏î‡πÄ‡∏°‡∏ô: $(-\\infty, \\infty)$</p>
                            <p>‚Ä¢ ‡πÄ‡∏£‡∏ô‡∏à‡πå: $[-1, 1]$</p>
                            <p>‚Ä¢ ‡∏Ñ‡∏≤‡∏ö: $2\\pi$</p>
                            <p>‚Ä¢ ‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡πÅ‡∏Å‡∏ô x: $x = n\\pi$ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ $n$ ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°</p>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg mb-4">
                            <p><strong>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô cos:</strong></p>
                            <p>‚Ä¢ ‡πÇ‡∏î‡πÄ‡∏°‡∏ô: $(-\\infty, \\infty)$</p>
                            <p>‚Ä¢ ‡πÄ‡∏£‡∏ô‡∏à‡πå: $[-1, 1]$</p>
                            <p>‚Ä¢ ‡∏Ñ‡∏≤‡∏ö: $2\\pi$</p>
                            <p>‚Ä¢ ‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡πÅ‡∏Å‡∏ô x: $x = \\frac{\\pi}{2} + n\\pi$ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ $n$ ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°</p>
                        </div>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏π‡∏õ</h2>
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <p><strong>‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ:</strong> $y = A\\sin(Bx + C) + D$</p>
                            <p>‚Ä¢ $A$ = ‡πÅ‡∏≠‡∏°‡∏û‡∏•‡∏¥‡∏à‡∏π‡∏î (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏•‡∏∑‡πà‡∏ô)</p>
                            <p>‚Ä¢ $B$ = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà (‡∏Ñ‡∏≤‡∏ö = $\\frac{2\\pi}{B}$)</p>
                            <p>‚Ä¢ $C$ = ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (‡πÄ‡∏ü‡∏™)</p>
                            <p>‚Ä¢ $D$ = ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á</p>
                        </div>
                        
                        <div class="mt-8">
                            <button onclick="showSection('graph-lab'); setEquation('sin(x)')" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark mr-4">‡∏î‡∏π‡∏Å‡∏£‡∏≤‡∏ü sin(x)</button>
                            <button onclick="showSection('graph-lab'); setEquation('cos(x)')" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 mr-4">‡∏î‡∏π‡∏Å‡∏£‡∏≤‡∏ü cos(x)</button>
                            <button onclick="startQuiz('trigonometry'); trackLessonCompletion('trig-functions')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</button>
                        </div>
                    `
                },
                'exponential': {
                    title: '‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á',
                    content: `
                        <h1 class="text-3xl font-bold mb-6">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á</h1>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏ô‡∏¥‡∏¢‡∏≤‡∏°</h2>
                        <p class="mb-4">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á ‡∏Ñ‡∏∑‡∏≠ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö $f(x) = a^x$ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ $a > 0$ ‡πÅ‡∏•‡∏∞ $a \\neq 1$</p>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</h2>
                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <p><strong>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô:</strong> $f(x) = e^x$ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ $e \\approx 2.71828$</p>
                            <p><strong>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥:</strong></p>
                            <p>‚Ä¢ ‡πÇ‡∏î‡πÄ‡∏°‡∏ô: $(-\\infty, \\infty)$</p>
                            <p>‚Ä¢ ‡πÄ‡∏£‡∏ô‡∏à‡πå: $(0, \\infty)$</p>
                            <p>‚Ä¢ ‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏∏‡∏î $(0, 1)$</p>
                            <p>‚Ä¢ ‡πÄ‡∏õ‡πá‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏° (increasing)</p>
                        </div>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏Å‡∏é‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á</h2>
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <p>$a^m \\cdot a^n = a^{m+n}$</p>
                            <p>$\\frac{a^m}{a^n} = a^{m-n}$</p>
                            <p>$(a^m)^n = a^{mn}$</p>
                            <p>$a^0 = 1$ (‡πÄ‡∏°‡∏∑‡πà‡∏≠ $a \\neq 0$)</p>
                            <p>$a^{-n} = \\frac{1}{a^n}$</p>
                        </div>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏¥‡∏ó‡∏∂‡∏°</h2>
                        <div class="bg-green-50 p-4 rounded-lg mb-4">
                            <p><strong>‡∏ô‡∏¥‡∏¢‡∏≤‡∏°:</strong> $\\log_a x = y$ ‡∏Å‡πá‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠ $a^y = x$</p>
                            <p><strong>‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏¥‡∏ó‡∏∂‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥:</strong> $\\ln x = \\log_e x$</p>
                            <p><strong>‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏¥‡∏ó‡∏∂‡∏°‡∏™‡∏≤‡∏°‡∏±‡∏ç:</strong> $\\log x = \\log_{10} x$</p>
                        </div>
                        
                        <div class="mt-8">
                            <button onclick="showSection('graph-lab'); setEquation('exp(x)')" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark mr-4">‡∏î‡∏π‡∏Å‡∏£‡∏≤‡∏ü e^x</button>
                            <button onclick="showSection('graph-lab'); setEquation('ln(x)')" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 mr-4">‡∏î‡∏π‡∏Å‡∏£‡∏≤‡∏ü ln(x)</button>
                            <button onclick="trackLessonCompletion('exponential')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏ö</button>
                        </div>
                    `
                },
                'derivatives': {
                    title: '‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå',
                    content: `
                        <h1 class="text-3xl font-bold mb-6">‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå</h1>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏ô‡∏¥‡∏¢‡∏≤‡∏°</h2>
                        <p class="mb-4">‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Ç‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô $f(x)$ ‡∏Ñ‡∏∑‡∏≠ ‡∏•‡∏¥‡∏°‡∏¥‡∏ï:</p>
                        <div class="bg-blue-50 p-4 rounded-lg mb-4 text-center">
                            <p>$f'(x) = \\lim_{h \\to 0} \\frac{f(x+h) - f(x)}{h}$</p>
                        </div>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå</h2>
                        <div class="bg-gray-50 p-4 rounded-lg mb-4">
                            <p><strong>‡∏Å‡∏é‡∏Å‡∏≥‡∏•‡∏±‡∏á:</strong> $\\frac{d}{dx}[x^n] = nx^{n-1}$</p>
                            <p><strong>‡∏Å‡∏é‡∏ú‡∏•‡∏£‡∏ß‡∏°:</strong> $\\frac{d}{dx}[f(x) + g(x)] = f'(x) + g'(x)$</p>
                            <p><strong>‡∏Å‡∏é‡∏ú‡∏•‡∏Ñ‡∏π‡∏ì:</strong> $\\frac{d}{dx}[f(x)g(x)] = f'(x)g(x) + f(x)g'(x)$</p>
                            <p><strong>‡∏Å‡∏é‡∏ú‡∏•‡∏´‡∏≤‡∏£:</strong> $\\frac{d}{dx}\\left[\\frac{f(x)}{g(x)}\\right] = \\frac{f'(x)g(x) - f(x)g'(x)}{[g(x)]^2}$</p>
                        </div>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Ç‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h2>
                        <div class="bg-green-50 p-4 rounded-lg mb-4">
                            <p>$\\frac{d}{dx}[\\sin x] = \\cos x$</p>
                            <p>$\\frac{d}{dx}[\\cos x] = -\\sin x$</p>
                            <p>$\\frac{d}{dx}[e^x] = e^x$</p>
                            <p>$\\frac{d}{dx}[\\ln x] = \\frac{1}{x}$</p>
                        </div>
                        
                        <h2 class="text-2xl font-semibold mb-4">‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå</h2>
                        <div class="bg-yellow-50 p-4 rounded-lg mb-4">
                            <p><strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™:</strong> ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î $(a, f(a))$ ‡∏Ñ‡∏∑‡∏≠ $f'(a)$</p>
                            <p><strong>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á:</strong> ‡∏≠‡∏ô‡∏∏‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
                            <p><strong>‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î:</strong> ‡πÉ‡∏ä‡πâ $f'(x) = 0$</p>
                        </div>
                        
                        <div class="mt-8">
                            <button onclick="showSection('graph-lab'); setEquation('x^2')" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark mr-4">‡∏î‡∏π‡∏Å‡∏£‡∏≤‡∏ü‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
                            <button onclick="trackLessonCompletion('derivatives')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏ö</button>
                        </div>
                    `
                }
            };
            
            const lesson = lessons[lessonId];
            if (lesson) {
                document.getElementById('lesson-content').innerHTML = lesson.content;
                showSection('lesson-detail');
                
                // Re-render MathJax
                if (window.MathJax) {
                    MathJax.typesetPromise();
                }
            }
        }
        
        // Graph Lab functions
        let currentGraphData = null;
        let baseXRange = [-10, 10];
        let baseYRange = null;
        
        function setEquation(equation) {
            document.getElementById('equation-input').value = equation;
        }
        
        function plotGraph() {
            const equation = document.getElementById('equation-input').value.trim();
            const xMin = parseFloat(document.getElementById('x-min').value);
            const xMax = parseFloat(document.getElementById('x-max').value);
            
            if (!equation) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡πâ‡∏≠‡∏ô‡∏™‡∏°‡∏Å‡∏≤‡∏£');
                return;
            }
            
            if (isNaN(xMin) || isNaN(xMax) || xMin >= xMax) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡πâ‡∏≠‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡πà‡∏≤ x ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (x ‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î < x ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)');
                return;
            }
            
            // Show loading
            document.getElementById('plot-btn-text').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏≤‡∏î...';
            document.getElementById('plot-loading').classList.remove('hidden');
            
            setTimeout(() => {
                try {
                    // Store base range
                    baseXRange = [xMin, xMax];
                    
                    // Generate x values
                    const x = [];
                    const y = [];
                    const step = (xMax - xMin) / 2000; // Increased resolution
                    
                    for (let i = xMin; i <= xMax; i += step) {
                        x.push(i);
                        try {
                            const result = evaluateExpression(equation, i);
                            y.push(isFinite(result) && !isNaN(result) ? result : null);
                        } catch (e) {
                            y.push(null);
                        }
                    }
                    
                    // Check if we have valid data points
                    const validPoints = y.filter(val => val !== null).length;
                    if (validPoints === 0) {
                        throw new Error('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î');
                    }
                    
                    // Store current graph data
                    currentGraphData = { x, y, equation };
                    
                    // Calculate base Y range
                    const validY = y.filter(val => val !== null && isFinite(val));
                    const minY = Math.min(...validY);
                    const maxY = Math.max(...validY);
                    const yPadding = (maxY - minY) * 0.1;
                    baseYRange = [minY - yPadding, maxY + yPadding];
                    
                    // Plot with Plotly
                    const trace = {
                        x: x,
                        y: y,
                        type: 'scatter',
                        mode: 'lines',
                        name: `y = ${equation}`,
                        line: { 
                            color: '#0B57A4', 
                            width: 3 
                        },
                        connectgaps: false
                    };
                    
                    const layout = {
                        title: {
                            text: `‡∏Å‡∏£‡∏≤‡∏ü‡∏Ç‡∏≠‡∏á y = ${equation}`,
                            font: { size: 18 }
                        },
                        xaxis: { 
                            title: 'x', 
                            gridcolor: '#e5e5e5',
                            zeroline: true,
                            zerolinecolor: '#999',
                            zerolinewidth: 2,
                            range: baseXRange
                        },
                        yaxis: { 
                            title: 'y', 
                            gridcolor: '#e5e5e5',
                            zeroline: true,
                            zerolinecolor: '#999',
                            zerolinewidth: 2,
                            range: baseYRange
                        },
                        plot_bgcolor: '#fafafa',
                        paper_bgcolor: 'white',
                        margin: { t: 60, r: 20, b: 60, l: 60 },
                        autosize: true,
                        width: null,
                        height: 400
                    };
                    
                    const config = {
                        responsive: true,
                        displayModeBar: true,
                        modeBarButtonsToRemove: ['pan2d', 'lasso2d', 'select2d', 'autoScale2d'],
                        displaylogo: false
                    };
                    
                    // Clear the container first
                    const container = document.getElementById('graph-container');
                    container.innerHTML = '';
                    container.style.display = 'block';
                    
                    Plotly.newPlot('graph-container', [trace], layout, config);
                    
                    // Show interactive controls
                    document.getElementById('graph-controls').classList.remove('hidden');
                    setupSliderListeners();
                    
                    // Track graph creation
                    trackGraphCreation();
                    
                    // Show graph info with analysis
                    const analysis = analyzeFunction(equation, x, y);
                    document.getElementById('graph-info').classList.remove('hidden');
                    document.getElementById('graph-details').innerHTML = `
                        <p><strong>‡∏™‡∏°‡∏Å‡∏≤‡∏£:</strong> y = ${equation}</p>
                        <p><strong>‡∏ä‡πà‡∏ß‡∏á x:</strong> ${xMin} ‡∏ñ‡∏∂‡∏á ${xMax}</p>
                        <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:</strong> ${validPoints} ‡∏à‡∏∏‡∏î</p>
                        ${analysis}
                    `;
                    
                } catch (error) {
                    alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏°‡∏Å‡∏≤‡∏£'}`);
                    console.error('Graph plotting error:', error);
                } finally {
                    // Hide loading
                    document.getElementById('plot-btn-text').textContent = '‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü';
                    document.getElementById('plot-loading').classList.add('hidden');
                }
            }, 100);
        }
        
        function setupSliderListeners() {
            // Zoom slider
            const zoomSlider = document.getElementById('zoom-slider');
            const zoomValue = document.getElementById('zoom-value');
            
            zoomSlider.addEventListener('input', function() {
                const zoom = parseFloat(this.value);
                zoomValue.textContent = zoom.toFixed(1) + 'x';
                updateGraphView();
            });
            
            // Pan sliders
            const panXSlider = document.getElementById('pan-x-slider');
            const panXValue = document.getElementById('pan-x-value');
            
            panXSlider.addEventListener('input', function() {
                const panX = parseFloat(this.value);
                panXValue.textContent = panX.toFixed(1);
                updateGraphView();
            });
            
            const panYSlider = document.getElementById('pan-y-slider');
            const panYValue = document.getElementById('pan-y-value');
            
            panYSlider.addEventListener('input', function() {
                const panY = parseFloat(this.value);
                panYValue.textContent = panY.toFixed(1);
                updateGraphView();
            });
        }
        
        function updateGraphView() {
            if (!currentGraphData || !baseXRange || !baseYRange) return;
            
            const zoom = parseFloat(document.getElementById('zoom-slider').value);
            const panX = parseFloat(document.getElementById('pan-x-slider').value);
            const panY = parseFloat(document.getElementById('pan-y-slider').value);
            
            // Calculate new ranges
            const xCenter = (baseXRange[0] + baseXRange[1]) / 2 + panX;
            const yCenter = (baseYRange[0] + baseYRange[1]) / 2 + panY;
            
            const xRange = (baseXRange[1] - baseXRange[0]) / zoom;
            const yRange = (baseYRange[1] - baseYRange[0]) / zoom;
            
            const newXRange = [xCenter - xRange/2, xCenter + xRange/2];
            const newYRange = [yCenter - yRange/2, yCenter + yRange/2];
            
            // Update the plot
            Plotly.relayout('graph-container', {
                'xaxis.range': newXRange,
                'yaxis.range': newYRange
            });
        }
        
        function updateGraphRange() {
            if (currentGraphData) {
                plotGraph(); // Redraw with new range
            }
        }
        
        function resetControls() {
            document.getElementById('zoom-slider').value = 1;
            document.getElementById('zoom-value').textContent = '1.0x';
            document.getElementById('pan-x-slider').value = 0;
            document.getElementById('pan-x-value').textContent = '0';
            document.getElementById('pan-y-slider').value = 0;
            document.getElementById('pan-y-value').textContent = '0';
            
            if (currentGraphData && baseXRange && baseYRange) {
                Plotly.relayout('graph-container', {
                    'xaxis.range': baseXRange,
                    'yaxis.range': baseYRange
                });
            }
        }
        
        function evaluateExpression(expr, x) {
            // Enhanced expression evaluator with better error handling
            let expression = expr.trim();
            
            // Handle common mathematical notation
            expression = expression.replace(/\^/g, '**');
            
            // Replace x with the actual value, being careful about context
            expression = expression.replace(/\bx\b/g, `(${x})`);
            
            // Replace mathematical constants
            expression = expression.replace(/\bpi\b/gi, 'Math.PI');
            expression = expression.replace(/\be\b/g, 'Math.E');
            
            // Handle mathematical functions - be more careful with replacements
            expression = expression.replace(/\bsin\s*\(/gi, 'Math.sin(');
            expression = expression.replace(/\bcos\s*\(/gi, 'Math.cos(');
            expression = expression.replace(/\btan\s*\(/gi, 'Math.tan(');
            expression = expression.replace(/\basin\s*\(/gi, 'Math.asin(');
            expression = expression.replace(/\bacos\s*\(/gi, 'Math.acos(');
            expression = expression.replace(/\batan\s*\(/gi, 'Math.atan(');
            
            // Logarithmic and exponential functions
            expression = expression.replace(/\blog\s*\(/gi, 'Math.log10(');
            expression = expression.replace(/\bln\s*\(/gi, 'Math.log(');
            expression = expression.replace(/\bexp\s*\(/gi, 'Math.exp(');
            expression = expression.replace(/\bsqrt\s*\(/gi, 'Math.sqrt(');
            expression = expression.replace(/\babs\s*\(/gi, 'Math.abs(');
            
            // Handle implicit multiplication more carefully
            expression = expression.replace(/(\d)\s*\(/g, '$1*(');
            expression = expression.replace(/\)\s*(\d)/g, ')*$1');
            expression = expression.replace(/(\d)\s*([a-zA-Z])/g, '$1*$2');
            expression = expression.replace(/([a-zA-Z])\s*(\d)/g, '$1*$2');
            
            // Handle Math.function calls that might have been created
            expression = expression.replace(/Math\.Math\./g, 'Math.');
            
            try {
                const result = eval(expression);
                return result;
            } catch (e) {
                console.warn('Expression evaluation error:', e, 'Expression:', expression);
                throw new Error('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ');
            }
        }
        
        function analyzeFunction(equation, xValues, yValues) {
            const validY = yValues.filter(y => y !== null && isFinite(y));
            if (validY.length === 0) return '';
            
            const minY = Math.min(...validY);
            const maxY = Math.max(...validY);
            const range = maxY - minY;
            
            let analysis = `<div class="mt-3 pt-3 border-t">
                <p class="font-semibold mb-2">‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏£‡∏≤‡∏ü:</p>
                <p><strong>‡∏Ñ‡πà‡∏≤ y ‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î:</strong> ${minY.toFixed(3)}</p>
                <p><strong>‡∏Ñ‡πà‡∏≤ y ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î:</strong> ${maxY.toFixed(3)}</p>
                <p><strong>‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡πà‡∏≤ y:</strong> ${range.toFixed(3)}</p>`;
            
            // Simple pattern detection
            if (equation.includes('x^2') || equation.includes('x**2')) {
                analysis += `<p><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</strong> ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏á (‡∏û‡∏≤‡∏£‡∏≤‡πÇ‡∏ö‡∏•‡∏≤)</p>`;
            } else if (equation.includes('sin') || equation.includes('cos')) {
                analysis += `<p><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</strong> ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥</p>`;
            } else if (equation.includes('x^3') || equation.includes('x**3')) {
                analysis += `<p><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</strong> ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≤‡∏°</p>`;
            } else if (!equation.includes('^') && !equation.includes('**') && !equation.includes('sin') && !equation.includes('cos')) {
                analysis += `<p><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</strong> ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô</p>`;
            }
            
            analysis += `</div>`;
            return analysis;
        }
        
        function resetZoom() {
            Plotly.relayout('graph-container', {
                'xaxis.autorange': true,
                'yaxis.autorange': true
            });
        }
        
        function downloadGraph() {
            Plotly.downloadImage('graph-container', {
                format: 'png',
                width: 800,
                height: 600,
                filename: 'graph'
            });
        }
        
        // Quiz functions
        const quizData = {
            'quadratic': {
                title: '‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏á',
                timeLimit: 15,
                questions: [
                    {
                        question: '‡∏à‡∏∏‡∏î‡∏¢‡∏≠‡∏î‡∏Ç‡∏≠‡∏á‡∏û‡∏≤‡∏£‡∏≤‡πÇ‡∏ö‡∏•‡∏≤ $y = x^2 - 4x + 3$ ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡πÉ‡∏î?',
                        type: 'multiple-choice',
                        options: ['(2, -1)', '(-2, 1)', '(4, 3)', '(1, 0)'],
                        correct: 0
                    },
                    {
                        question: '‡∏Ñ‡πà‡∏≤‡∏î‡∏¥‡∏™‡∏Ñ‡∏£‡∏¥‡∏°‡∏¥‡πÅ‡∏ô‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏™‡∏°‡∏Å‡∏≤‡∏£ $x^2 - 5x + 6 = 0$ ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î?',
                        type: 'multiple-choice',
                        options: ['1', '4', '9', '25'],
                        correct: 0
                    }
                ]
            },
            'linear': {
                title: '‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô',
                timeLimit: 12,
                questions: [
                    {
                        question: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏∏‡∏î (1, 2) ‡πÅ‡∏•‡∏∞ (3, 8) ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡πÉ‡∏î?',
                        type: 'multiple-choice',
                        options: ['2', '3', '4', '6'],
                        correct: 1
                    }
                ]
            }
        };
        
        function startQuiz(quizType) {
            currentQuiz = quizData[quizType];
            if (!currentQuiz) return;
            
            currentQuestionIndex = 0;
            userAnswers = new Array(currentQuiz.questions.length).fill(null);
            
            // Hide selection, show active quiz
            document.getElementById('quiz-selection').classList.add('hidden');
            document.getElementById('quiz-active').classList.remove('hidden');
            
            // Set title and start timer
            document.getElementById('quiz-title').textContent = currentQuiz.title;
            startQuizTimer(currentQuiz.timeLimit * 60);
            
            // Load first question
            loadQuestion();
        }
        
        function loadQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const container = document.getElementById('question-container');
            
            // Update progress
            document.getElementById('quiz-progress').textContent = 
                `‡∏Ç‡πâ‡∏≠ ${currentQuestionIndex + 1} ‡∏à‡∏≤‡∏Å ${currentQuiz.questions.length}`;
            
            let html = `
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-4">‡∏Ç‡πâ‡∏≠ ${currentQuestionIndex + 1}</h3>
                    <p class="mb-4">${question.question}</p>
            `;
            
            if (question.type === 'multiple-choice') {
                html += '<div class="space-y-2">';
                question.options.forEach((option, index) => {
                    const checked = userAnswers[currentQuestionIndex] === index ? 'checked' : '';
                    html += `
                        <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                            <input type="radio" name="answer" value="${index}" ${checked} class="mr-3">
                            <span>${option}</span>
                        </label>
                    `;
                });
                html += '</div>';
            }
            
            html += '</div>';
            container.innerHTML = html;
            
            // Add event listeners for answers
            document.querySelectorAll('input[name="answer"]').forEach(input => {
                input.addEventListener('change', function() {
                    userAnswers[currentQuestionIndex] = parseInt(this.value);
                });
            });
            
            // Update navigation buttons
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            document.getElementById('next-btn').textContent = 
                currentQuestionIndex === currentQuiz.questions.length - 1 ? '‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö' : '‡∏ñ‡∏±‡∏î‡πÑ‡∏õ';
            
            // Re-render MathJax
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                finishQuiz();
            }
        }
        
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }
        
        function startQuizTimer(seconds) {
            let timeLeft = seconds;
            const timerElement = document.getElementById('quiz-timer');
            
            quizTimer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const secs = timeLeft % 60;
                timerElement.textContent = `${minutes}:${secs.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(quizTimer);
                    finishQuiz();
                }
                timeLeft--;
            }, 1000);
        }
        
        function finishQuiz() {
            clearInterval(quizTimer);
            
            // Calculate score
            let correct = 0;
            currentQuiz.questions.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    correct++;
                }
            });
            
            const percentage = Math.round((correct / currentQuiz.questions.length) * 100);
            
            // Track quiz completion
            const quizType = Object.keys(quizData).find(key => quizData[key] === currentQuiz);
            if (quizType) {
                trackQuizCompletion(quizType, percentage);
            }
            
            // Hide active quiz, show results
            document.getElementById('quiz-active').classList.add('hidden');
            document.getElementById('quiz-results').classList.remove('hidden');
            
            // Display results
            document.getElementById('score-display').textContent = `${percentage}%`;
            document.getElementById('score-details').textContent = 
                `‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å ${correct} ‡∏Ç‡πâ‡∏≠ ‡∏à‡∏≤‡∏Å ${currentQuiz.questions.length} ‡∏Ç‡πâ‡∏≠`;
        }
        
        function resetQuiz() {
            // Reset all quiz states
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('quiz-active').classList.add('hidden');
            document.getElementById('quiz-selection').classList.remove('hidden');
            
            currentQuiz = null;
            currentQuestionIndex = 0;
            userAnswers = [];
            
            if (quizTimer) {
                clearInterval(quizTimer);
                quizTimer = null;
            }
        }
        
        // Contact form
        document.getElementById('contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const message = document.getElementById('contact-message').value;
            
            // Basic validation
            if (!name || !email || !message) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            if (!email.includes('@')) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                return;
            }
            
            // Show success message (in real app, this would send to server)
            document.getElementById('contact-success').classList.remove('hidden');
            this.reset();
            
            // Hide success message after 5 seconds
            setTimeout(() => {
                document.getElementById('contact-success').classList.add('hidden');
            }, 5000);
        });
        
        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.getElementById('mobile-menu').classList.contains('hidden') === false) {
                document.getElementById('mobile-menu').classList.add('hidden');
                document.getElementById('mobile-menu-btn').setAttribute('aria-expanded', 'false');
            }
        });
        
        // Authentication functions
        function login(email, password) {
            // Simulate login (in real app, this would call server API)
            const users = JSON.parse(localStorage.getItem('mathtx_users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('mathtx_current_user', JSON.stringify(user));
                loadUserProgress();
                updateAuthUI();
                showSection('home');
                return true;
            }
            return false;
        }
        
        function register(userData) {
            // Simulate registration (in real app, this would call server API)
            const users = JSON.parse(localStorage.getItem('mathtx_users') || '[]');
            
            // Check if email already exists
            if (users.find(u => u.email === userData.email)) {
                return { success: false, message: '‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß' };
            }
            
            // Create new user
            const newUser = {
                id: Date.now().toString(),
                name: userData.name,
                email: userData.email,
                password: userData.password,
                grade: userData.grade,
                joinDate: new Date().toISOString(),
                progress: {
                    lessonsCompleted: [],
                    quizzesCompleted: [],
                    graphsCreated: 0,
                    totalScore: 0,
                    quizCount: 0
                }
            };
            
            users.push(newUser);
            localStorage.setItem('mathtx_users', JSON.stringify(users));
            
            return { success: true, user: newUser };
        }
        
        function logout() {
            currentUser = null;
            userProgress = {
                lessonsCompleted: [],
                quizzesCompleted: [],
                graphsCreated: 0,
                totalScore: 0,
                quizCount: 0
            };
            localStorage.removeItem('mathtx_current_user');
            updateAuthUI();
            showSection('home');
        }
        
        function updateAuthUI() {
            const userMenu = document.getElementById('user-menu');
            const authButtons = document.getElementById('auth-buttons');
            const mobileUserMenu = document.getElementById('mobile-user-menu');
            const mobileAuthButtons = document.getElementById('mobile-auth-buttons');
            const profileNav = document.getElementById('profile-nav');
            const mobileProfileNav = document.getElementById('mobile-profile-nav');
            
            if (currentUser) {
                // Show user menu, hide auth buttons
                userMenu.classList.remove('hidden');
                authButtons.classList.add('hidden');
                mobileUserMenu.classList.remove('hidden');
                mobileAuthButtons.classList.add('hidden');
                profileNav.classList.remove('hidden');
                mobileProfileNav.classList.remove('hidden');
                
                // Update user name displays
                document.getElementById('user-name').textContent = currentUser.name;
                document.getElementById('mobile-user-name').textContent = currentUser.name;
            } else {
                // Show auth buttons, hide user menu
                userMenu.classList.add('hidden');
                authButtons.classList.remove('hidden');
                mobileUserMenu.classList.add('hidden');
                mobileAuthButtons.classList.remove('hidden');
                profileNav.classList.add('hidden');
                mobileProfileNav.classList.add('hidden');
            }
        }
        
        function loadUserProgress() {
            if (currentUser && currentUser.progress) {
                userProgress = { ...currentUser.progress };
                updateProgressDisplay();
            }
        }
        
        function saveUserProgress() {
            if (currentUser) {
                currentUser.progress = { ...userProgress };
                
                // Update in localStorage
                const users = JSON.parse(localStorage.getItem('mathtx_users') || '[]');
                const userIndex = users.findIndex(u => u.id === currentUser.id);
                if (userIndex !== -1) {
                    users[userIndex] = currentUser;
                    localStorage.setItem('mathtx_users', JSON.stringify(users));
                    localStorage.setItem('mathtx_current_user', JSON.stringify(currentUser));
                }
            }
        }
        
        function updateProgressDisplay() {
            if (currentSection === 'profile') {
                // Update profile info
                document.getElementById('profile-name').textContent = currentUser?.name || '';
                document.getElementById('profile-email').textContent = currentUser?.email || '';
                document.getElementById('profile-grade').textContent = getGradeText(currentUser?.grade) || '';
                document.getElementById('profile-joined').textContent = currentUser ? 
                    new Date(currentUser.joinDate).toLocaleDateString('th-TH') : '';
                
                // Update progress stats
                const totalLessons = 10;
                const completedLessons = userProgress.lessonsCompleted.length;
                const progressPercentage = (completedLessons / totalLessons) * 100;
                
                document.getElementById('lessons-completed').textContent = `${completedLessons}/${totalLessons}`;
                document.getElementById('lessons-progress').style.width = `${progressPercentage}%`;
                document.getElementById('quizzes-completed').textContent = userProgress.quizCount.toString();
                document.getElementById('average-score').textContent = userProgress.quizCount > 0 ? 
                    Math.round(userProgress.totalScore / userProgress.quizCount) + '%' : '-';
                document.getElementById('graphs-created').textContent = userProgress.graphsCreated.toString();
            }
        }
        
        function getGradeText(grade) {
            const gradeMap = {
                'm4': '‡∏°.4',
                'm5': '‡∏°.5',
                'm6': '‡∏°.6',
                'other': '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'
            };
            return gradeMap[grade] || '';
        }
        
        function trackLessonCompletion(lessonId) {
            if (currentUser && !userProgress.lessonsCompleted.includes(lessonId)) {
                userProgress.lessonsCompleted.push(lessonId);
                saveUserProgress();
                addActivity(`‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏ö‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ${lessonId}`);
            }
        }
        
        function trackQuizCompletion(quizType, score) {
            if (currentUser) {
                userProgress.quizzesCompleted.push({
                    type: quizType,
                    score: score,
                    date: new Date().toISOString()
                });
                userProgress.totalScore += score;
                userProgress.quizCount += 1;
                saveUserProgress();
                addActivity(`‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î ${quizType} ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${score}%`);
            }
        }
        
        function trackGraphCreation() {
            if (currentUser) {
                userProgress.graphsCreated += 1;
                saveUserProgress();
                addActivity('‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü‡πÉ‡∏´‡∏°‡πà');
            }
        }
        
        function addActivity(activity) {
            if (currentUser) {
                if (!currentUser.recentActivity) {
                    currentUser.recentActivity = [];
                }
                currentUser.recentActivity.unshift({
                    text: activity,
                    date: new Date().toISOString()
                });
                // Keep only last 10 activities
                currentUser.recentActivity = currentUser.recentActivity.slice(0, 10);
                saveUserProgress();
            }
        }
        
        // Form handlers
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const errorDiv = document.getElementById('login-error');
            
            if (login(email, password)) {
                // Success - redirect handled in login function
                errorDiv.classList.add('hidden');
            } else {
                errorDiv.textContent = '‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                errorDiv.classList.remove('hidden');
            }
        });
        
        document.getElementById('register-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const grade = document.getElementById('register-grade').value;
            const acceptTerms = document.getElementById('accept-terms').checked;
            
            const errorDiv = document.getElementById('register-error');
            const successDiv = document.getElementById('register-success');
            
            // Validation
            if (!acceptTerms) {
                errorDiv.textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
                errorDiv.classList.remove('hidden');
                successDiv.classList.add('hidden');
                return;
            }
            
            if (password !== confirmPassword) {
                errorDiv.textContent = '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô';
                errorDiv.classList.remove('hidden');
                successDiv.classList.add('hidden');
                return;
            }
            
            if (password.length < 6) {
                errorDiv.textContent = '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£';
                errorDiv.classList.remove('hidden');
                successDiv.classList.add('hidden');
                return;
            }
            
            const result = register({ name, email, password, grade });
            
            if (result.success) {
                successDiv.textContent = '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...';
                successDiv.classList.remove('hidden');
                errorDiv.classList.add('hidden');
                
                // Auto login after successful registration
                setTimeout(() => {
                    login(email, password);
                }, 1500);
            } else {
                errorDiv.textContent = result.message;
                errorDiv.classList.remove('hidden');
                successDiv.classList.add('hidden');
            }
        });
        
        // Check for existing session on load
        function checkExistingSession() {
            const savedUser = localStorage.getItem('mathtx_current_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                loadUserProgress();
                updateAuthUI();
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkExistingSession();
            showSection('home');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9811623ed7328bc5',t:'MTc1ODIwNDE3NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
